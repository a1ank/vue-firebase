(function(e){function t(t){for(var a,s,o=t[0],l=t[1],u=t[2],d=0,p=[];d<o.length;d++)s=o[d],r[s]&&p.push(r[s][0]),r[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"02fc":function(e,t,n){"use strict";var a=n("dc8d"),r=n.n(a);r.a},"1f6b":function(e,t,n){"use strict";var a=n("3e78"),r=n.n(a);r.a},"32d6":function(e,t,n){"use strict";var a=n("c569"),r=n.n(a);r.a},"379e":function(e,t,n){},"3e78":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("app-header"),n("v-content",[n("router-view")],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-navigation-drawer",{staticClass:"hidden-md-and-up",attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",e._l(e.menuItems,function(t,a){return n("v-list-tile",{key:"navdrawer${i}"},[n("v-list-tile-action",[n("v-icon",{domProps:{innerHTML:e._s(t.icon)}})],1),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{textContent:e._s(t.title)}})],1)],1)}),1)],1),n("v-toolbar",{staticClass:"green darken-1",attrs:{app:"",dark:""}},[n("v-toolbar-side-icon",{staticClass:"hidden-md-and-up",on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[n("v-toolbar-title",{domProps:{textContent:e._s("AlmauGuid")}})],1),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[e._l(e.menuItems,function(t,a){return n("v-btn",{key:"menuitem${i}",attrs:{flat:"",to:t.route}},[n("v-icon",{attrs:{left:""},domProps:{innerHTML:e._s(t.icon)}}),e._v("\n                "+e._s(t.title)+"\n            ")],1)}),e.isUserAuthenticated?n("v-btn",{attrs:{flat:""},on:{click:function(t){return t.preventDefault(),e.signout(t)}}},[n("v-icon",{attrs:{left:""}},[e._v("exit_to_app")]),e._v("\n                Выйти\n            ")],1):e._e()],2)],1)],1)},o=[],l={data:function(){return{drawer:!1}},computed:{isUserAuthenticated:function(){return this.$store.getters.isUserAuthenticated},menuItems:function(){return this.isUserAuthenticated?[{icon:"account_circle",title:"Мой Кабинет",route:"/profile"}]:[{icon:"account_circle",title:"Мой Кабинет",route:"/profile"},{icon:"input",title:"Войти",route:"/signin"},{icon:"lock_open",title:"Зарегистрироваться",route:"/signup"}]}},methods:{signout:function(){var e=this;this.$confirm("Вы точно хотите выйти с AlmauGuid?").then(function(t){t&&e.$store.dispatch("SIGNOUT")})}}},u=l,c=(n("02fc"),n("2877")),d=Object(c["a"])(u,s,o,!1,null,"8f0449a8",null);d.options.__file="AppHeader.vue";var p=d.exports,f={components:{AppHeader:p}},m=f,v=Object(c["a"])(m,r,i,!1,null,null,null);v.options.__file="App.vue";var h=v.exports,_=n("8c4f"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},E=[],g={components:{}},b=g,S=Object(c["a"])(b,w,E,!1,null,null,null);S.options.__file="Home.vue";var R=S.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"green darken-1"}},[n("v-toolbar-title",[e._v("Вход")])],1),n("v-card-text",[n("v-alert",{attrs:{value:e.error,type:"warning"}},[e._v("\n                      "+e._s(e.error)+"\n                    ")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{"prepend-icon":"email",name:"login",label:"E-mail",type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Пароль",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",disabled:e.processing},on:{click:function(t){return t.preventDefault(),e.signin(t)}}},[e._v("Войти")])],1)],1)],1)],1)],1)},y=[],x={data:function(){return{email:null,password:null,valid:!1,emailRules:[function(e){return!!e||"Пожалуйста введите EMAIL"},function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)||"Неправильный E-mail"}],passwordRules:[function(e){return!!e||"Пожалуйста введите пароль"},function(e){return e&&e.length>=6||"Пароль должен состоять как минимум из 6 символов"}]}},computed:{error:function(){return this.$store.getters.getError},processing:function(){return this.$store.getters.getProcessing},isUserAuthenticated:function(){return this.$store.getters.isUserAuthenticated}},watch:{isUserAuthenticated:function(e){1==e&&this.$router.push("/")}},methods:{signin:function(){this.$store.dispatch("SIGNIN",{email:this.email,password:this.password})}}},A=x,k=(n("8a99"),Object(c["a"])(A,T,y,!1,null,"1640b0c2",null));k.options.__file="Signin.vue";var O=k.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"green darken-1"}},[n("v-toolbar-title",[e._v("Регистрация")])],1),n("v-card-text",[n("v-alert",{attrs:{value:e.error,type:"warning"}},[e._v("\n                      "+e._s(e.error)+"\n                    ")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{"prepend-icon":"person",name:"name",label:"Имя",type:"text",required:"",rules:e.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),n("v-text-field",{attrs:{"prepend-icon":"email",name:"login",label:"E-mail",type:"email",required:"",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Пароль",type:"password",required:"",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",disabled:e.processing||!e.valid},on:{click:function(t){return t.preventDefault(),e.signup(t)}}},[e._v("Зарегистрироваться")])],1)],1)],1)],1)],1)],1)},N=[],U=(n("7f7f"),{data:function(){return{email:null,password:null,valid:!1,name:null,nameRules:[function(e){return!!e||"Пожалуйста введите ваше Имя"}],emailRules:[function(e){return!!e||"Пожалуйста введите EMAIL"},function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)||"Неправильный E-mail"}],passwordRules:[function(e){return!!e||"Пожалуйста введите пароль"},function(e){return e&&e.length>=6||"Пароль должен состоять как минимум из 6 символов"}]}},computed:{error:function(){return this.$store.getters.getError},processing:function(){return this.$store.getters.getProcessing},isUserAutheticated:function(){return this.$store.getters.isUserAuthenticated}},watch:{isUserAutheticated:function(e){1==e&&this.$router.push("/")}},methods:{signup:function(){this.$store.dispatch("SIGNUP",{email:this.email,password:this.password,name:this.name})}}}),I=U,C=(n("32d6"),Object(c["a"])(I,P,N,!1,null,"4bacda19",null));C.options.__file="Signup.vue";var $=C.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm10:"","offset-sm1":""}},[n("v-tabs",{attrs:{color:"accent",dark:"","fixed-tabs":"","slider-color":"success"},model:{value:e.tabMode,callback:function(t){e.tabMode=t},expression:"tabMode"}},[n("v-tab",{key:"data",attrs:{ripple:""}},[e._v("\n                        Мой данные\n                    ")]),n("v-tab-item",{key:"data"},[n("user-profile-data")],1)],1)],1)],1)],1)},M=[],j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("v-card-title",{attrs:{"primary-title":""}},[n("div",[n("h3",{staticClass:"headline mb-0"},[n("v-icon",[e._v("person")]),e._v(e._s(e.userName))],1),n("h3",{staticClass:"headline mb-0"},[n("v-icon",[e._v("email")]),e._v(e._s(e.userEmail))],1)])]),n("v-card-actions",[n("v-spacer"),n("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-btn",{attrs:{slot:"activator",color:"primary"},slot:"activator"},[e._v("Изменить мои данные")]),n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Изменить мои данные? ")]),n("v-card-text",[n("v-alert",{attrs:{value:e.getError,type:"warning"}},[e._v("\r\n                      "+e._s(e.getError)+"\r\n                    ")]),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{"prepend-icon":"person",name:"login",label:"E-mail",type:"email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Пароль",type:"password",required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("h3",[e._v("Я хочу изменить ")]),n("v-radio-group",{model:{value:e.changeType,callback:function(t){e.changeType=t},expression:"changeType"}},[n("v-radio",{attrs:{label:"Имя",value:"name"}}),"name"==e.changeType?n("v-text-field",{attrs:{"prepend-icon":"person",name:"newname",label:"Новое Имя",type:"text",required:"",rules:e.nameRules},model:{value:e.newname,callback:function(t){e.newname=t},expression:"newname"}}):e._e(),n("v-radio",{attrs:{label:"Е-майл",value:"email"}}),"email"==e.changeType?n("v-text-field",{attrs:{"prepend-icon":"email",name:"newlogin",label:"Новый E-mail",type:"email",required:"",rules:e.emailRules},model:{value:e.newemail,callback:function(t){e.newemail=t},expression:"newemail "}}):e._e(),n("v-radio",{attrs:{label:"Пароль",value:"password"}}),"password"==e.changeType?n("v-text-field",{attrs:{"prepend-icon":"lock",label:" Новый пароль",name:"newpassword",type:"password",required:"",rules:e.passwordRules},model:{value:e.newpassword,callback:function(t){e.newpassword=t},expression:"newpassword"}}):e._e()],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(t){e.dialog=!1}}},[e._v("Отменить")]),n("v-btn",{attrs:{color:"green darken-1",flat:"",disabled:e.getProcessing||!e.valid},on:{click:function(t){return t.preventDefault(),e.changeUserData(t)}}},[e._v("Изменить")])],1)],1)],1)],1)],1)],1)},D=[],L=n("be94"),q=n("2f62"),H={data:function(){return{dialog:!1,changeType:"name",email:null,password:null,newname:null,newemail:null,newpassword:null,valid:!1,nameRules:[function(e){return!!e||"Пожалуйста введите ваше Имя"}],emailRules:[function(e){return!!e||"Пожалуйста введите EMAIL"},function(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)||"Неправильный E-mail"}],passwordRules:[function(e){return!!e||"Пожалуйста введите пароль"},function(e){return e&&e.length>=6||"Пароль должен состоять как минимум из 6 символов"}]}},computed:Object(L["a"])({},Object(q["b"])(["userName","userEmail","getProcessing","getError"])),methods:{changeUserData:function(){this.$store.dispatch("CHANGE_USER_PROFILE_DATA",{email:this.email,password:this.password,newName:this.newname,newEmail:this.newemail,newPassword:this.newpassword,changeType:this.changeType})}}},z=H,B=(n("1f6b"),Object(c["a"])(z,j,D,!1,null,"365378a2",null));B.options.__file="UserProfileData.vue";var F=B.exports,W={data:function(){return{tabMode:"data"}},components:{UserProfileData:F}},J=W,K=(n("5985"),Object(c["a"])(J,G,M,!1,null,"4a403ec1",null));K.options.__file="Profile.vue";var Q=K.exports,Y=n("8aa5"),V=n.n(Y),X={state:{user:{isAuthenticated:!1,uid:null,email:null,name:null}},mutations:{SET_USER:function(e,t){e.user.isAuthenticated=!0,e.user.uid=t.uid,e.user.email=t.email},SET_USER_NAME:function(e,t){e.user.name=t,e.user.uid=t},SET_USER_EMAIL:function(e,t){e.user.email=t},UNSET_USER:function(e){e.user={isAuthenticated:!1,uid:null}}},actions:{SIGNUP:function(e,t){var n=e.commit;n("SET_PROCESSING",!0),V.a.auth().createUserWithEmailAndPassword(t.email,t.password).then(function(e){V.a.auth().currentUser.updateProfile({displayName:t.name}).then(function(){return n("SET_USER_NAME",t.name)}),n("SET_USER",e.uid),n("SET_PROCESSING",!1)}).catch(function(e){n("SET_PROCESSING",!1),n("SET_ERROR",e.message)})},SIGNIN:function(e,t){var n=e.commit;n("SET_PROCESSING",!0),V.a.auth().signInWithEmailAndPassword(t.email,t.password).then(function(e){n("SET_USER",e.uid),n("SET_PROCESSING",!1)}).catch(function(e){n("SET_PROCESSING",!1),n("SET_ERROR",e.message)})},SIGNOUT:function(){V.a.auth().signOut()},STATE_CHANGED:function(e,t){var n=e.commit;t?(n("SET_USER",{uid:t.uid,email:t.email}),n("SET_USER_NAME",t.displayName)):n("UNSET_USER")},CHANGE_USER_PROFILE_DATA:function(e,t){var n=e.commit,a=V.a.auth().currentUser,r=V.a.auth.EmailAuthProvider.credential(t.email,t.password);n("SET_PROCESSING",!0),n("CLEAR_ERROR"),a.reauthenticateAndRetrieveDataWithCredential(r).then(function(){var e=V.a.auth().currentUser;"name"==t.changeType&&e.updateProfile({displayName:t.newName}).then(function(){n("SET_USER_NAME",t.newName),n("SET_PROCESSING",!1)}).catch(function(e){n("SET_PROCESSING",!1),n("SET_ERROR",e.message)}),"email"==t.changeType&&e.updateEmail(t.newEmail).then(function(){n("SET_USER_EMAIL",t.newEmail),n("SET_PROCESSING",!1)}).catch(function(e){n("SET_PROCESSING",!1),n("SET_ERROR",e.message)}),"password"==t.changeType&&e.updatePassword(t.newPassword).then(function(){n("SET_PROCESSING",!1)}).catch(function(e){n("SET_PROCESSING",!1),n("SET_ERROR",e.message)})}).catch(function(e){n("SET_PROCESSING",!1),n("SET_ERROR",e.message)})}},getters:{userId:function(e){return e.user.uid},userName:function(e){return e.user.name},userEmail:function(e){return e.user.email},isUserAuthenticated:function(e){return e.user.isAuthenticated}}},Z={state:{processing:!1,error:null},mutations:{SET_PROCESSING:function(e,t){e.processing=t},SET_ERROR:function(e,t){e.processing=t},CLEAN_ERROR:function(e){e.error=null}},getters:{getProcessing:function(e){return e.processing},getError:function(e){return e.error}}};a["default"].use(q["a"]);var ee=new q["a"].Store({modules:{userModule:X,generalModule:Z}});a["default"].use(_["a"]);var te=new _["a"]({routes:[{path:"/",name:"home",component:R},{path:"/signin",name:"signin",component:O},{path:"/signup",name:"signup",component:$},{path:"/profile",name:"profile",component:Q,beforeEnter:ne}],mode:"history"});function ne(e,t,n){ee.getters.isUserAuthenticated?n():n("/signin")}var ae=n("ce5b"),re=n.n(ae),ie=(n("bf40"),n("9eed")),se=n.n(ie),oe={apiKey:"AIzaSyBaKmiMvBg2U2CY4P1RBedkzhs7dQzunvA",authDomain:"almau-437d8.firebaseapp.com",databaseURL:"https://almau-437d8.firebaseio.com",projectId:"almau-437d8",storageBucket:"almau-437d8.appspot.com",messagingSenderId:"1029484324643"};a["default"].use(re.a),a["default"].config.productionTip=!1,a["default"].use(se.a,{buttonTrueText:"Да",buttonFalseText:"ОЙ, нет",width:400}),V.a.initializeApp(oe),new a["default"]({router:te,store:ee,render:function(e){return e(h)},created:function(){var e=this;V.a.auth().onAuthStateChanged(function(t){e.$store.dispatch("STATE_CHANGED",t)})}}).$mount("#app")},5985:function(e,t,n){"use strict";var a=n("a521"),r=n.n(a);r.a},"8a99":function(e,t,n){"use strict";var a=n("379e"),r=n.n(a);r.a},a521:function(e,t,n){},c569:function(e,t,n){},dc8d:function(e,t,n){}});
//# sourceMappingURL=app.75e9a9cd.js.map